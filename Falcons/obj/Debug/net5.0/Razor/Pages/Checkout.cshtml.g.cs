#pragma checksum "C:\Users\User\Documents\GitHub\Cinema-Management-System\Falcons\Pages\Checkout.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "cec9ef0f7fe5d44303d9491c9455cdc02ee14b5f"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(Falcons.Pages.Pages_Checkout), @"mvc.1.0.razor-page", @"/Pages/Checkout.cshtml")]
namespace Falcons.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\User\Documents\GitHub\Cinema-Management-System\Falcons\Pages\_ViewImports.cshtml"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\User\Documents\GitHub\Cinema-Management-System\Falcons\Pages\_ViewImports.cshtml"
using Falcons;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\User\Documents\GitHub\Cinema-Management-System\Falcons\Pages\_ViewImports.cshtml"
using Falcons.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\User\Documents\GitHub\Cinema-Management-System\Falcons\Pages\Checkout.cshtml"
using Newtonsoft.Json;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"cec9ef0f7fe5d44303d9491c9455cdc02ee14b5f", @"/Pages/Checkout.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"eda54c565b70cf76a129e71347f29674895644bf", @"/Pages/_ViewImports.cshtml")]
    public class Pages_Checkout : global::Microsoft.AspNetCore.Mvc.RazorPages.Page
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("method", "post", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("PayNow"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 4 "C:\Users\User\Documents\GitHub\Cinema-Management-System\Falcons\Pages\Checkout.cshtml"
  
    ViewData["Title"] = "Checkout";

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
<div class=""row"">
    <div class=""col-md-8"">
        <h3>Product</h3>
        <div id=""cart"">
            <!-- Product Menu -->
        </div>
    </div>
    <div class=""col=md-4"">
        <div class=""row"">
            <div class=""col-md-12""><h3>Summary</h3></div>
        </div>
        <div class=""row mt-3"">
            <div class=""col-md-6"">
                <h5>Total Price</h5>
            </div>
            <div class=""col-md-6"">
                <h5 id=""TotalPrice""></h5>
            </div>
        </div>
        <div class=""row mt-5"">
            <div class=""col-md-12"">
                ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "cec9ef0f7fe5d44303d9491c9455cdc02ee14b5f5109", async() => {
                WriteLiteral("\r\n                    <input type=\"hidden\" name=\"json\" id=\"json\" />\r\n                    <button class=\"btn btn-primary\" type=\"submit\">Pay Now</button>\r\n                ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Method = (string)__tagHelperAttribute_0.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_0);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n");
            DefineSection("Scripts", async() => {
                WriteLiteral("\r\n    <script>\r\n    $(function () {\r\n");
#nullable restore
#line 42 "C:\Users\User\Documents\GitHub\Cinema-Management-System\Falcons\Pages\Checkout.cshtml"
          
            string ProductDetailjson = JsonConvert.SerializeObject(Model.ProductDetails);
            string Productjson = JsonConvert.SerializeObject(Model.Products);
            string Menujson = JsonConvert.SerializeObject(Model.Menus);
        

#line default
#line hidden
#nullable disable
                WriteLiteral("        var Product = ");
#nullable restore
#line 47 "C:\Users\User\Documents\GitHub\Cinema-Management-System\Falcons\Pages\Checkout.cshtml"
                 Write(Html.Raw(Productjson));

#line default
#line hidden
#nullable disable
                WriteLiteral(";\r\n        var ProductDetail = ");
#nullable restore
#line 48 "C:\Users\User\Documents\GitHub\Cinema-Management-System\Falcons\Pages\Checkout.cshtml"
                       Write(Html.Raw(ProductDetailjson));

#line default
#line hidden
#nullable disable
                WriteLiteral(";\r\n        var Menu = ");
#nullable restore
#line 49 "C:\Users\User\Documents\GitHub\Cinema-Management-System\Falcons\Pages\Checkout.cshtml"
              Write(Html.Raw(Menujson));

#line default
#line hidden
#nullable disable
                WriteLiteral(@";

        function AppendToCart(title, description, price, imgUrl, id) {
            if (imgUrl != ""/assets/img/No-Image.png"") {
                imgUrl = ""/assets/img/menus/"" + imgUrl;
            }
            $(""div#cart"").append(""<div class='row mt-5'>"" +
                ""<div class='col-md-3'>"" +
                ""<img style='max-width:100%;' src='"" + imgUrl + ""' />"" +
                ""</div>"" +
                ""<div class='col-md-9'>"" +
                ""<div style=''font-size:20px;'>"" + title + ""</div>"" +
                ""<div>"" +
                ""<p>"" + description + ""</p>"" +
                ""</div>"" +
                ""<div>RM "" + price + ""</div>"" +
                ""<div>"" +
                ""</div>"" +
                ""</div>"" +
                ""</div>"");
        }

        function AppendToAlarcarteCart(title, description, price, imgUrl, id) {
            if (imgUrl != ""/assets/img/No-Image.png"") {
                imgUrl = ""/assets/img/products/"" + imgUrl;
            }

     ");
                WriteLiteral(@"       $(""div#cart"").append(""<div class='row mt-5'>"" +
                ""<div class='col-md-3'>"" +
                ""<img style='max-width:100%;' src='"" + imgUrl + ""' />"" +
                ""</div>"" +
                ""<div class='col-md-9'>"" +
                ""<div style=''font-size:20px;'>"" + title + ""</div>"" +
                ""<div>"" +
                ""<p>"" + description + ""</p>"" +
                ""</div>"" +
                ""<div>RM "" + price + ""</div>"" +
                ""<div>"" +
                ""</div>"" +
                ""</div>"" +
                ""</div>"");
        }

        let TotalSummaryPrice = 0;

        if (typeof (Storage) !== ""undefined"") {
            let cartMenuArray = [];
            if (!(localStorage.getItem(""FnBMenuCart"") == null || localStorage.getItem(""FnBMenuCart"") == """")) {
                cartMenuArray = JSON.parse(localStorage.getItem(""FnBMenuCart""));
            }

            if (cartMenuArray.length > 0) {
                for (let i = 0; i < cartMenuArray.l");
                WriteLiteral(@"ength; i++) {
                    //product name
                    let title = """";
                    let IMGLink = """";
                    let id = 0;
                    for (let k = 0; k < Menu.length; k++) {
                        if (cartMenuArray[i].MenuID == Menu[k].MenuID) {
                            title = Menu[k].PackageName;
                            //IMGLink = Menu[k].ImageURL.split("","", 1);
                            if (Menu[k].ImageURL == null || Menu[k].ImageURL == """") {
                                IMGLink = ""/assets/img/No-Image.png"";
                            } else {
                                IMGLink = Menu[k].ImageURL.split("","", 1);
                            }
                            id = i;
                        }
                    }

                    let ProductDescription = """";
                    let TotalPrice = 0;
                    //console.log(cartMenuArray[i].ProductDetail);

                    //process ProductDetail in");
                WriteLiteral(@" the cart one by one
                    for (let y = 0; y < cartMenuArray[i].ProductDetail.length; y++) {
                        //find product detail size first
                        for (let j = 0; j < ProductDetail.length; j++) {
                            if (cartMenuArray[i].ProductDetail[y].ProductDetailID == ProductDetail[j].ProductDetailID) {
                                //find product name
                                for (let u = 0; u < Product.length; u++) {
                                    //console.log(""Product : "" + Product[u].ProductID);
                                    //console.log(""Product ID: "" + ProductDetail[j].ProductID);
                                    if (Product[u].ProductID == ProductDetail[j].ProductID) {
                                        console.log(""Found"");
                                        if (y == 0) {
                                            ProductDescription = Product[u].ProductTitle + "" ("" + ProductDetail[j].Size +"")"";
      ");
                WriteLiteral(@"                                      TotalPrice = ProductDetail[j].ProductPrice;
                                        } else {
                                            ProductDescription = ProductDescription + ""<br/>"" + Product[u].ProductTitle + "" ("" + ProductDetail[j].Size + "")"";
                                            TotalPrice += ProductDetail[j].ProductPrice;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    TotalSummaryPrice += TotalPrice;
                    //console.log(""\nTitle"" + title + ""\n Description "" + ProductDescription + ""\nPrice "" + TotalPrice + ""\nImg "" + IMGLink);
                    AppendToCart(title, ProductDescription, TotalPrice, IMGLink, id);
                }
            }

            //A la carte Product
            let cartArray = [];
            if (!(localStorage.getItem(""FnBProductCart"") ");
                WriteLiteral(@"== null || localStorage.getItem(""FnBProductCart"") == """")) {
                cartArray = JSON.parse(localStorage.getItem(""FnBProductCart""));
            }

            if (cartArray.length > 0) {
                for (let i = 0; i < cartArray.length; i++) {
                    //product name
                    let title = """";
                    let IMGLink = """";
                    let ProductDescription = """";
                    let TotalPrice = 0;
                    let id = 0;
                    for (let k = 0; k < ProductDetail.length; k++) {
                        if (cartArray[i].ProductDetailID == ProductDetail[k].ProductDetailID) {
                            ProductDescription = ProductDetail[k].Size + "" x "" + cartArray[i].quantity;
                            TotalPrice = ProductDetail[k].ProductPrice * cartArray[i].quantity;
                            id = i;

                            for (let o = 0; o < Product.length; o++) {
                                if (Product[o]");
                WriteLiteral(@".ProductID == ProductDetail[k].ProductID) {
                                    title = Product[o].ProductTitle;
                                    //IMGLink = Product[o].ImageURL.split("","", 1);
                                    if (Product[o].ImageURL == null || Product[o].ImageURL == """") {
                                        IMGLink = ""/assets/img/No-Image.png"";
                                    } else {
                                        IMGLink = Product[o].ImageURL.split("","", 1);
                                    }
                                }
                            }
                        }

                    }

                    //console.log(""\nTitle"" + title + ""\n Description "" + ProductDescription + ""\nPrice "" + TotalPrice + ""\nImg "" + IMGLink);
                    TotalSummaryPrice += TotalPrice;
                    AppendToAlarcarteCart(title, ProductDescription, TotalPrice, IMGLink, id);
                }
            }
        }

        $(""h5#");
                WriteLiteral(@"TotalPrice"").text(""RM "" + TotalSummaryPrice);


        let CheckoutMenus = [];
        let Products = [];
        let CheckoutJsonContainer = new Object();
        if (!(localStorage.getItem(""FnBProductCart"") == null || localStorage.getItem(""FnBProductCart"") == """")) {
            Products = JSON.parse(localStorage.getItem(""FnBProductCart""));
        }

        if (!(localStorage.getItem(""FnBMenuCart"") == null || localStorage.getItem(""FnBMenuCart"") == """")) {
            CheckoutMenus = JSON.parse(localStorage.getItem(""FnBMenuCart""));
        }

        CheckoutJsonContainer.CheckoutMenus = CheckoutMenus;
        CheckoutJsonContainer.Products = Products;

        $(""input#json"").val(JSON.stringify(CheckoutJsonContainer));

        $(""#PayNow"").on(""click"", function (e) {
            e.preventDefault();

            if (!(localStorage.getItem(""FnBProductCart"") == null || localStorage.getItem(""FnBProductCart"") == """")) {
                localStorage.removeItem(""FnBProductCart"");
          ");
                WriteLiteral(@"  }

            if (!(localStorage.getItem(""FnBMenuCart"") == null || localStorage.getItem(""FnBMenuCart"") == """")) {
                localStorage.removeItem(""FnBMenuCart"");
            }

            $(this).submit();
        });

        /*$(""button#PayNow"").click(function () {
            let CheckoutMenus = [];
            let Products = [];
            let CheckoutJsonContainer = new Object();
            if (!(localStorage.getItem(""FnBProductCart"") == null || localStorage.getItem(""FnBProductCart"") == """")) {
                Products = JSON.parse(localStorage.getItem(""FnBProductCart""));
            }

            if (!(localStorage.getItem(""FnBMenuCart"") == null || localStorage.getItem(""FnBMenuCart"") == """")) {
                CheckoutMenus = JSON.parse(localStorage.getItem(""FnBMenuCart""));
            }

            CheckoutJsonContainer.CheckoutMenus = CheckoutMenus;
            CheckoutJsonContainer.Products = Products;

            $.ajax({
                type: 'POST',
        ");
                WriteLiteral(@"        url: '/Checkout',
                contentType: 'application/json',
                data: JSON.stringify(CheckoutJsonContainer),
                success: function(result) {
                    console.log(""AJAX Sent to Checkout"");
                    console.log(result);
                }
            });
        });*/
    });
    </script>
");
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<Falcons.Pages.CheckoutModel> Html { get; private set; }
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<Falcons.Pages.CheckoutModel> ViewData => (global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<Falcons.Pages.CheckoutModel>)PageContext?.ViewData;
        public Falcons.Pages.CheckoutModel Model => ViewData.Model;
    }
}
#pragma warning restore 1591
